<!DOCTYPE html>
<html>
<head>
  <title>6.170 Assignment 2: Game Of Life</title>
  <link rel="stylesheet" href="./index.css" type="text/css" charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>

<body>

	<h1>Game Of Life</h1>

	<div id="grid"></div>

	<div id="buttons">
		<img src="./images/play.jpg" id="play">
		<img src="./images/pause.png" id="pause">
	</div>

	<script type="text/javascript">
		
		$(document).ready(function() {

			var columns = 31;
			var rows = 25;
			var play;

			var game = Game();
			game.startGame(columns, rows);

			var createGrid = function() {
				var column = 0;
				times(columns, function() {
					$("#grid").append("<div id=Column" + column + " class=column>");
					$(".column").width($(".column").parent().width() / columns);
					$(".column").height($(".column").parent().height());			
					var row = 0;
					times(rows, function() {
						$("#Column" + column).append("<div id=" + column + "," + row + " class=cell>");
						$(".cell").width($(".cell").parent().width());
						$(".cell").height($(".cell").parent().height() / rows);
						row++;
					});
					column++;
				});
			}();

			$(".cell").click(function(event) {
				if (!game.getMode()) {
					var splitId = event.target.id.split(",")
					var column = splitId[0];
					var row = splitId[1];
					game.invertCellState(column, row);
				};
			});

			$("#play").click(function() {
				game.enterPlay();
				start();
				$("#play").css("outline", "1px solid");
				$("#pause").css("outline", "none");
			});

			$("#pause").click(function() {
				game.pause();
				clearInterval(play);
				$("#play").css("outline", "none");
				$("#pause").css("outline", "1px solid");
			});

			var updateGridState = function() {
				setInterval(function() {
					$(".cell").each(function() {
						var id = this.id;
						var splitId = id.split(",");
						var column = splitId[0];
						var row = splitId[1];
						if (game.getCellState(column, row)) {
							document.getElementById(id).style.backgroundColor = "#00ff00";
						} else {
							document.getElementById(id).style.backgroundColor = "#e6e6e6";
						};
					});
				}, 1);
			}();

			var start = function() {
				play = setInterval(function() {
					game.advanceRound();
				}, 200);
			};

		});

	</script>

	<script src="./cell.js"></script>
	<script src="./grid.js"></script>
	<script src="./game.js"></script>

</body>
</html>